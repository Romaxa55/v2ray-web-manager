## Использование памяти в Java

### Куча и потоки

![Куча и память](https://github.com/romaxa55/v2ray-web-manager/raw/master/static/thread-heap.png)

На изображении выше представлены куча и потоки для Java proxy-сервиса.

Как можно видеть, использование CPU очень низкое, его практически можно не учитывать.

Использование кучи также минимально, в основном происходит minor gc. Когда тренд достигает пика, активируется Major gc для освобождения памяти.

Похоже, что потоки используются довольно активно, так как есть более 10 потоков, связанных с JMX удаленным подключением для мониторинга. Нормальное количество потоков составляет 15. (В Linux каждый поток занимает около 2 МБ памяти).

![Прямая память](https://github.com/romaxa55/v2ray-web-manager/raw/master/static/direct-memory.png)

На изображении выше представлено использование `прямой памяти`. Как видно, память освобождается своевременно.
